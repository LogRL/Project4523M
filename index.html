<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="./login.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <title>Login</title>
</head>

<body>


    <div class="box">

        <div class="pre-box">
            <h1>WELCOME</h1>
            <div class="img-box">
                <img src="asserts/img/popcat1.png" alt="">
            </div>
        </div>

        <div class="dealer-form">

            <div class="title-box">
                <h1>Dealer Login</h1>
            </div>

            <div class="input-box">
                <input type="text" id="login_name" placeholder="Account">
                <input type="password" id="login_pw" placeholder="Password">
            </div>

            <div class="btn-box">
                <button onclick="dealer_login()">Login</button>

                <p onclick="mySwitch()">Sales Manager?</p>
            </div>
        </div>

        <div class="manager-form">

            <div class="title-box">
                <h1>Sales Manager Login </h1>
            </div>

            <div class="input-box">
                <input type="text" id="manager_name" placeholder="Account">
                <input type="password" id="manager_pw" placeholder="Password">
            </div>

            <div class="btn-box">
                <button onclick="manager_login()">Login</button>
                <p onclick="mySwitch()">Dealer?</p>
            </div>
        </div>
    </div>

    <script>
        let flag = true
        const mySwitch = () => {
            if (flag) {
                $(".pre-box").css("transform", "translateX(100%)")
                $(".pre-box").css("background-color", "#c9e0ed")
                $("img").attr("src", "asserts/img/popcat2.jpg")
            }
            else {
                $(".pre-box").css("transform", "translateX(0%)")
                $(".pre-box").css("background-color", "#edd4dc")
                $("img").attr("src", "asserts/img/popcat1.png")
            }
            flag = !flag
        }

        function dealer_login() {
            var login_name = document.getElementById("login_name").value;
            var ogin_pw = document.getElementById("login_pw").value;
            

                    $.ajax({
                        type: "POST",
                        url: "./dealer_login.php",
                        data: {
                            login_name: login_name,
                            login_pw: login_pw
                        },
                        success: function (response) {
                            if(response == "dealer"){
                                alert("Login Success");
                                window.location.href = "./dealer/dealer_home.html";
                            }else if(response =="salesmanager"){
                                alert("Login Success");
                                window.location.href = "./manager/manager_home.html";
                            }
                            else{alert("Login Fail");}
                        }
                    });
     


        }

        function manager_login() {
            var manager_name = document.getElementById("manager_name").value;
            var manager_pw = document.getElementById("manager_pw").value;


            $.ajax({
                type:"Post",
                url:"./manager_login.php",
                data:{
                    manager_name:manager_name,
                    manager_pw:manager_pw
                },
                success:function(response){
                    if(response == "success"){
                        alert("Login Success");
                        window.location.href = "./manager/manager_home.html";
                    }else if(response == "wrong account name or password"){
                        alert("Wrong account name or password");
                    }
                    else{
                        alert("database error");
                    }
                }
            })
        }


    </script>

    <head>
        <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>    </head>

</body>

</html>